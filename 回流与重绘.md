# 回流与重绘

## 回流
浏览器拿到渲染树之后，计算每个 DOM 节点在窗口中的的大小和位置，这个计算过程就是 回流。
## 重绘
在回流阶段，浏览器可以知道每个元素节点的样式属性（位置、宽高、背景、是否可见的等等），然后浏览器将回流阶段拿到元素转化为屏幕上的像素，这个过程就是重绘，
## 什么时候会发生回流
1. 页面第一次渲染时(初始化)；
2. 添加或删除可见的DOM元素；
3. 元素的位置发生变化；
4. 元素的尺寸发生变化(包括外边距，内边距，边框大小，高度和宽度等）；
5. 内容发生变化，比如文本变化或图片被另一个不同尺寸的图片所替代或者字体改变
6. 浏览器窗口尺寸的变化（因为回流是根据视口的大小来计算元素的位置和大小的）
## 什么时候会发生重绘
由于回流一定重绘，所以以上六种情况必然触发重绘
1. 修改元素的背景颜色
2. 修改背景图片
3. visibility

## 怎样减少回流与重绘
1. 避免逐项更改样式。最好批量更改style属性，或者将样式列表定义为class并一次性更改class属性。
2. 避免频繁操作DOM。创建一个documentFragment，在它上面应用所有DOM操作，最后再把它添加到window.document
3. 对样式频繁发生的变化的元素使用绝对定位，使其脱离文档流。由于页面中有时候会有一部分元素是有持续性的动画效果的，所以会一直触发回流和重绘，此时可以使这些元素脱离文档流，以此减少页面回流和重绘的次数；使用浮动( float )、绝对定位( position: absolute )可以使元素脱离文档流；
